<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="utf-8">
  <title>Elevator Action ‚Äî PezzaliAPP (Rewrite)</title>
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover">
  <meta name="theme-color" content="#0b1022">
  <link rel="manifest" href="./manifest.webmanifest">
  <link rel="icon" type="image/png" href="./assets/icon-192.png">
  <style>
    :root{--bg:#0b1022;--card:#0e1533;--b:#1a2559;--fg:#eaf1ff}
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--fg);font:15px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Arial}
    header{padding:8px 12px;background:var(--card);border-bottom:1px solid var(--b);text-align:center}
    header h1{margin:0;font-size:16px}
    #gamebox{display:flex;flex-direction:column;align-items:center;gap:12px;padding:12px}
    canvas{background:#0a1026;border:1px solid var(--b);border-radius:12px;touch-action:none;display:block}
    #hud{display:flex;gap:12px;align-items:center;justify-content:center}
    .pill{background:var(--card);border:1px solid var(--b);border-radius:10px;padding:6px 10px}
    #controls{display:flex;flex-direction:column;align-items:center;gap:10px;margin-top:8px}
    .pad{display:grid;grid-template-columns:repeat(3,64px);grid-template-rows:repeat(2,64px);gap:10px;justify-content:center}
    .btn{border:1px solid var(--b);background:#141c44;color:var(--fg);border-radius:16px;padding:14px 16px;min-width:64px;text-align:center;user-select:none}
    .wide{min-width:140px;font-weight:600}
    #startOverlay{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.55);z-index:10}
    #startCard{background:var(--card);border:1px solid var(--b);border-radius:16px;padding:18px 22px;box-shadow:0 10px 30px rgba(0,0,0,.35);text-align:center}
    #banner{opacity:.9}
    @media (max-width:900px){ body{padding-bottom:16px} }
  </style>
</head>
<body>
  <header><h1>Elevator Action ‚Äî PezzaliAPP (Rewrite)</h1></header>
  <div id="gamebox">
    <canvas id="screen" width="384" height="512" tabindex="0" aria-label="Elevator Action Game Canvas"></canvas>
    <div id="hud" class="pill">
      <span id="level">LV 1</span>
      <span id="intel">üìÑ 0/0</span>
      <span id="lives">‚ù§‚ù§‚ù§</span>
      <button id="btnMute" class="btn">üîä</button>
    </div>
    <div id="controls">
      <div class="pad" aria-hidden="true">
        <div class="btn" data-k="ArrowLeft">‚óÄÔ∏é</div>
        <div class="btn" data-k="ArrowDown">‚ñº</div>
        <div class="btn" data-k="ArrowRight">‚ñ∂Ô∏é</div>
        <div class="btn" data-k="KeyZ">A</div>
        <div class="btn" data-k="KeyX">B</div>
        <div class="btn" data-k="Space">‚è∏</div>
      </div>
      <div style="display:flex;gap:10px;flex-wrap:wrap;justify-content:center">
        <div class="btn wide" data-k="ArrowUp">SALI/ENTRA</div>
        <div class="btn wide" data-k="Enter">FIRE</div>
      </div>
      <div id="banner" class="pill">Obiettivo: prendi i documenti dietro le <b>porte rosse</b> e raggiungi la <b>pedana verde</b>.</div>
    </div>
  </div>

  <!-- START overlay -->
  <div id="startOverlay">
    <div id="startCard">
      <h2 style="margin:0 0 8px 0">Elevator Action</h2>
      <p style="margin:0 0 14px 0">Premi <b>START</b> o <b>Enter</b> per iniziare.</p>
      <button id="btnStart" class="btn wide">‚ñ∂Ô∏è START</button>
    </div>
  </div>

  <!-- Audio (opzionale; non blocca) -->
  <audio id="sfx_pick" preload="auto" playsinline>
    <source src="./assets/sfx/pickup.wav" type="audio/wav">
    <source src="./assets/sfx/pickup.mp3" type="audio/mpeg">
  </audio>
  <audio id="sfx_shot" preload="auto" playsinline>
    <source src="./assets/sfx/shot.wav" type="audio/wav">
    <source src="./assets/sfx/shot.mp3" type="audio/mpeg">
  </audio>
  <audio id="sfx_door" preload="auto" playsinline>
    <source src="./assets/sfx/door.wav" type="audio/wav">
    <source src="./assets/sfx/door.mp3" type="audio/mpeg">
  </audio>

  <script src="./app.js"></script>
  <script>if('serviceWorker' in navigator){navigator.serviceWorker.register('./sw.js');}</script>
</body>
</html>
